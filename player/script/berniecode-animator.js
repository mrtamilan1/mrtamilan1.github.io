function Animator(a){this.setOptions(a);var b=this;this.timerDelegate=function(){b.onTimerEvent()},this.subjects=[],this.subjectScopes=[],this.target=0,this.state=0,this.lastTime=null}function NumericalStyleSubject(b,d,a,f,c){this.els=Animator.makeArray(b),this.property="opacity"==d&&window.ActiveXObject?"filter":Animator.camelize(d),this.from=parseFloat(a),this.to=parseFloat(f),this.units=null!=c?c:"px"}function ColorStyleSubject(b,c,a,d){this.els=Animator.makeArray(b),this.property=Animator.camelize(c),this.to=this.expandColor(d),this.from=this.expandColor(a),this.origFrom=a,this.origTo=d}function DiscreteStyleSubject(b,d,a,f,c){this.els=Animator.makeArray(b),this.property=Animator.camelize(d),this.from=a,this.to=f,this.threshold=c||0.5}function CSSStyleSubject(A,w,q){if(A=Animator.makeArray(A),this.subjects=[],0!=A.length){var f,b,B;if(q){B=this.parseStyle(w,A[0]),b=this.parseStyle(q,A[0])}else{b=this.parseStyle(w,A[0]),B={};for(f in b){B[f]=CSSStyleSubject.getStyle(A[0],f)}}var f;for(f in B){B[f]==b[f]&&(delete B[f],delete b[f])}var f,g,y,k,v,x;for(f in B){var z=String(B[f]),d=String(b[f]);if(null!=b[f]){if(v=ColorStyleSubject.parseColor(z)){x=ColorStyleSubject.parseColor(d),k=ColorStyleSubject}else{if(z.match(CSSStyleSubject.numericalRe)&&d.match(CSSStyleSubject.numericalRe)){v=parseFloat(z),x=parseFloat(d),k=NumericalStyleSubject,y=CSSStyleSubject.numericalRe.exec(z);var j=CSSStyleSubject.numericalRe.exec(d);g=null!=y[1]?y[1]:null!=j[1]?j[1]:j}else{if(!z.match(CSSStyleSubject.discreteRe)||!d.match(CSSStyleSubject.discreteRe)){window.DEBUG&&alert("Unrecognised format for value of "+f+": '"+B[f]+"'");continue}v=z,x=d,k=DiscreteStyleSubject,g=0}}this.subjects[this.subjects.length]=new k(A,f,v,x,g)}else{window.DEBUG&&alert("No to style provided for '"+f+'"')}}}}function AnimatorChain(b,c){this.animators=b,this.setOptions(c);for(var a=0;a<this.animators.length;a++){this.listenTo(this.animators[a])}this.forwards=!1,this.current=0}function Accordion(p){this.setOptions(p);var k,g=this.options.initialSection;this.options.rememberance&&(k=document.location.hash.substring(1)),this.rememberanceTexts=[],this.ans=[];for(var c=this,b=0;b<this.options.sections.length;b++){var q=this.options.sections[b],d=new Animator(this.options.animatorOptions),m=this.options.from+this.options.shift*b,f=this.options.to+this.options.shift*b;d.addSubject(new NumericalStyleSubject(q,this.options.property,m,f,this.options.units)),d.jumpTo(0);var j=this.options.getActivator(q);j.index=b,j.onclick=function(){c.show(this.index)},this.ans[this.ans.length]=d,this.rememberanceTexts[b]=j.innerHTML.replace(/\s/g,""),this.rememberanceTexts[b]===k&&(g=b)}this.show(g)}Animator.prototype={setOptions:function(a){this.options=Animator.applyDefaults({interval:20,duration:400,onComplete:function(){},onStep:function(){},transition:Animator.tx.easeInOut},a)},seekTo:function(a){this.seekFromTo(this.state,a)},seekFromTo:function(a,b){this.target=Math.max(0,Math.min(1,b)),this.state=Math.max(0,Math.min(1,a)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.options.interval))},jumpTo:function(a){this.target=this.state=Math.max(0,Math.min(1,a)),this.propagate()},toggle:function(){this.seekTo(1-this.target)},addSubject:function(a,b){return this.subjects[this.subjects.length]=a,this.subjectScopes[this.subjectScopes.length]=b,this},clearSubjects:function(){this.subjects=[],this.subjectScopes=[]},propagate:function(){for(var a=this.options.transition(this.state),b=0;b<this.subjects.length;b++){this.subjects[b].setState?this.subjects[b].setState(a):this.subjects[b].apply(this.subjectScopes[b],[a])}},onTimerEvent:function(){var b=(new Date).getTime(),c=b-this.lastTime;this.lastTime=b;var a=c/this.options.duration*(this.state<this.target?1:-1);Math.abs(a)>=Math.abs(this.state-this.target)?this.state=this.target:this.state+=a;try{this.propagate()}finally{this.options.onStep.call(this),this.target==this.state&&(window.clearInterval(this.intervalId),this.intervalId=null,this.options.onComplete.call(this))}},play:function(){this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},inspect:function(){for(var a="#<Animator:\n",b=0;b<this.subjects.length;b++){a+=this.subjects[b].inspect()}return a+=">"}},Animator.applyDefaults=function(b,c){c=c||{};var a,d={};for(a in b){d[a]=void 0!==c[a]?c[a]:b[a]}return d},Animator.makeArray=function(b){if(null==b){return[]}if(!b.length){return[b]}for(var c=[],a=0;a<b.length;a++){c[a]=b[a]}return c},Animator.camelize=function(b){var f=b.split("-");if(1==f.length){return f[0]}for(var a=0==b.indexOf("-")?f[0].charAt(0).toUpperCase()+f[0].substring(1):f[0],g=1,d=f.length;d>g;g++){var c=f[g];a+=c.charAt(0).toUpperCase()+c.substring(1)}return a},Animator.apply=function(b,c,a){return c instanceof Array?new Animator(a).addSubject(new CSSStyleSubject(b,c[0],c[1])):new Animator(a).addSubject(new CSSStyleSubject(b,c))},Animator.makeEaseIn=function(a){return function(b){return Math.pow(b,2*a)}},Animator.makeEaseOut=function(a){return function(b){return 1-Math.pow(1-b,2*a)}},Animator.makeElastic=function(a){return function(b){return b=Animator.tx.easeInOut(b),(1-Math.cos(b*Math.PI*a))*(1-b)+b}},Animator.makeADSR=function(b,c,a,d){return null==d&&(d=0.5),function(e){return b>e?e/b:c>e?1-(e-b)/(c-b)*(1-d):a>e?d:d*(1-(e-a)/(1-a))}},Animator.makeBounce=function(a){var b=Animator.makeElastic(a);return function(c){return c=b(c),1>=c?c:2-c}},Animator.tx={easeInOut:function(a){return -Math.cos(a*Math.PI)/2+0.5},linear:function(a){return a},easeIn:Animator.makeEaseIn(1.5),easeOut:Animator.makeEaseOut(1.5),strongEaseIn:Animator.makeEaseIn(2.5),strongEaseOut:Animator.makeEaseOut(2.5),elastic:Animator.makeElastic(1),veryElastic:Animator.makeElastic(3),bouncy:Animator.makeBounce(1),veryBouncy:Animator.makeBounce(3)},NumericalStyleSubject.prototype={setState:function(b){for(var d=this.getStyle(b),a=("opacity"==this.property&&0==b?"hidden":"",0),f=0;f<this.els.length;f++){try{this.els[f].style[this.property]=d}catch(c){if("fontWeight"!=this.property){throw c}}if(a++>20){return}}},getStyle:function(a){return a=this.from+(this.to-this.from)*a,"filter"==this.property?"alpha(opacity="+Math.round(100*a)+")":"opacity"==this.property?a:Math.round(a)+this.units},inspect:function(){return"	"+this.property+"("+this.from+this.units+" to "+this.to+this.units+")\n"}},ColorStyleSubject.prototype={expandColor:function(b){var d,a,f,c;return(d=ColorStyleSubject.parseColor(b))?(a=parseInt(d.slice(1,3),16),f=parseInt(d.slice(3,5),16),c=parseInt(d.slice(5,7),16),[a,f,c]):(window.DEBUG&&alert("Invalid colour: '"+b+"'"),void 0)},getValueForState:function(a,b){return Math.round(this.from[a]+(this.to[a]-this.from[a])*b)},setState:function(b){for(var c="#"+ColorStyleSubject.toColorPart(this.getValueForState(0,b))+ColorStyleSubject.toColorPart(this.getValueForState(1,b))+ColorStyleSubject.toColorPart(this.getValueForState(2,b)),a=0;a<this.els.length;a++){this.els[a].style[this.property]=c}},inspect:function(){return"	"+this.property+"("+this.origFrom+" to "+this.origTo+")\n"}},ColorStyleSubject.parseColor=function(b){var d,a="#";if(d=ColorStyleSubject.parseColor.rgbRe.exec(b)){for(var f,c=1;3>=c;c++){f=Math.max(0,Math.min(255,parseInt(d[c]))),a+=ColorStyleSubject.toColorPart(f)}return a}if(d=ColorStyleSubject.parseColor.hexRe.exec(b)){if(3==d[1].length){for(var c=0;3>c;c++){a+=d[1].charAt(c)+d[1].charAt(c)}return a}return"#"+d[1]}return !1},ColorStyleSubject.toColorPart=function(a){a>255&&(a=255);var b=a.toString(16);return 16>a?"0"+b:b},ColorStyleSubject.parseColor.rgbRe=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,ColorStyleSubject.parseColor.hexRe=/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,DiscreteStyleSubject.prototype={setState:function(a){for(var b=0;b<this.els.length;b++){this.els[b].style[this.property]=a<=this.threshold?this.from:this.to}},inspect:function(){return"	"+this.property+"("+this.from+" to "+this.to+" @ "+this.threshold+")\n"}},CSSStyleSubject.prototype={parseStyle:function(k,h){var g={};if(-1!=k.indexOf(":")){for(var c=k.split(";"),b=0;b<c.length;b++){var m=CSSStyleSubject.ruleRe.exec(c[b]);m&&(g[m[1]]=m[2])}}else{var d,j,f;f=h.className,h.className=k;for(var b=0;b<CSSStyleSubject.cssProperties.length;b++){d=CSSStyleSubject.cssProperties[b],j=CSSStyleSubject.getStyle(h,d),null!=j&&(g[d]=j)}h.className=f}return g},setState:function(a){for(var b=0;b<this.subjects.length;b++){this.subjects[b].setState(a)}},inspect:function(){for(var a="",b=0;b<this.subjects.length;b++){a+=this.subjects[b].inspect()}return a}},CSSStyleSubject.getStyle=function(b,c){var a;return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(b,"").getPropertyValue(c))?a:(c=Animator.camelize(c),b.currentStyle&&(a=b.currentStyle[c]),a||b.style[c])},CSSStyleSubject.ruleRe=/^\s*([a-zA-Z\-]+)\s*:\s*(\S(.+\S)?)\s*$/,CSSStyleSubject.numericalRe=/^-?\d+(?:\.\d+)?(%|[a-zA-Z]{2})?$/,CSSStyleSubject.discreteRe=/^\w+$/,CSSStyleSubject.cssProperties=["azimuth","background","background-attachment","background-color","background-image","background-position","background-repeat","border-collapse","border-color","border-spacing","border-style","border-top","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width","border-width","bottom","clear","clip","color","content","cursor","direction","display","elevation","empty-cells","css-float","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-top","margin-right","margin-bottom","margin-left","max-height","max-width","min-height","min-width","orphans","outline","outline-color","outline-style","outline-width","overflow","padding","padding-top","padding-right","padding-bottom","padding-left","pause","position","right","size","table-layout","text-align","text-decoration","text-indent","text-shadow","text-transform","top","vertical-align","visibility","white-space","width","word-spacing","z-index","opacity","outline-offset","overflow-x","overflow-y"],AnimatorChain.prototype={setOptions:function(a){this.options=Animator.applyDefaults({resetOnPlay:!0},a)},play:function(){if(this.forwards=!0,this.current=-1,this.options.resetOnPlay){for(var a=0;a<this.animators.length;a++){this.animators[a].jumpTo(0)}}this.advance()},reverse:function(){if(this.forwards=!1,this.current=this.animators.length,this.options.resetOnPlay){for(var a=0;a<this.animators.length;a++){this.animators[a].jumpTo(1)}}this.advance()},toggle:function(){this.forwards?this.seekTo(0):this.seekTo(1)},listenTo:function(b){var c=b.options.onComplete,a=this;b.options.onComplete=function(){c&&c.call(b),a.advance()}},advance:function(){if(this.forwards){if(null==this.animators[this.current+1]){return}this.current++,this.animators[this.current].play()}else{if(null==this.animators[this.current-1]){return}this.current--,this.animators[this.current].reverse()}},seekTo:function(a){0>=a?(this.forwards=!1,this.animators[this.current].seekTo(0)):(this.forwards=!0,this.animators[this.current].seekTo(1))}},Accordion.prototype={setOptions:function(a){this.options=Object.extend({sections:null,getActivator:function(b){return document.getElementById(b.getAttribute("activator"))},shift:0,initialSection:0,rememberance:!0,animatorOptions:{}},a||{})},show:function(a){for(var b=0;b<this.ans.length;b++){this.ans[b].seekTo(b>a?1:0)}this.options.rememberance&&(document.location.hash=this.rememberanceTexts[a])}};
(function(d,b){function a(aT,j){function aS(l){return aJ.preferFlash&&at&&!aJ.ignoreFlash&&aJ.flash[l]!==b&&aJ.flash[l]}function ay(l){return function(n){var m=this._s;return !m||!m._a?null:l.call(this,n)}}this.setupOptions={url:aT||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1000,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"};this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100};this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs\x3d"mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs\x3d"mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs\x3dvorbis"],required:!1},opus:{type:["audio/ogg; codecs\x3dopus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs\x3d"1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}};this.movieID="sm2-container";this.id=j||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20131201";this.altURL=this.movieURL=this.version=null;this.enabled=this.swfLoaded=!1;this.oMC=null;this.sounds={};this.soundIDs=[];this.didFlashBlock=this.muted=!1;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1};this.sandbox={};this.html5={usingFlash:null};this.flash={};this.ignoreFlash=this.html5Only=!1;var aK,aJ=this,ak=null,aE=null,aR,aw=navigator.userAgent,J=d.location.href.toString(),aB=document,bH,bK,bw,aD,aq=[],a6=!1,a4=!1,az=!1,ao=!1,bg=!1,a3,ar,aI,aQ,aj,bi,bf,be,bA,o,bJ,aP,bz,aN,bn,bd,aL,a2,al,by,bc,bo,ac,aM,e,am,a1=null,bB=null,aZ,bp,a9,bs,a0,ax,aX=!1,bG=!1,ad,f,bC,aC=0,aW=null,ag,bq=[],aV,au=null,aO,i,aU,an,bF,bv,ap,av,bE=Array.prototype.slice,bm=!1,a8,at,aH,ae,bl,bu,g=0,a7=aw.match(/(ipad|iphone|ipod)/i),bD=aw.match(/android/i),bk=aw.match(/msie/i),bt=aw.match(/webkit/i),aG=aw.match(/safari/i)&&!aw.match(/chrome/i),ai=aw.match(/opera/i),k=aw.match(/(mobile|pre\/|xoom)/i)||a7||bD,bj=!J.match(/usehtml5audio/i)&&!J.match(/sm2\-ignorebadua/i)&&aG&&!aw.match(/silk/i)&&aw.match(/OS X 10_6_([3-7])/i),bI=aB.hasFocus!==b?aB.hasFocus():null,ah=aG&&(aB.hasFocus===b||!aB.hasFocus()),br=!ah,aY=/(mp3|mp4|mpa|m4a|m4b)/i,bx=aB.location?aB.location.protocol.match(/http/i):null,aA=!bx?"http://":"",af=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,h="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),a5=RegExp("\\.("+h.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!bx;var bh;try{bh=Audio!==b&&(ai&&opera!==b&&10>opera.version()?new Audio(null):new Audio).canPlayType!==b}catch(aF){bh=!1}this.hasHTML5=bh;this.setup=function(l){var m=!aJ.url;l!==b&&az&&au&&aJ.ok();aI(l);l&&(m&&(a2&&l.url!==b)&&aJ.beginDelayedInit(),!a2&&(l.url!==b&&"complete"===aB.readyState)&&setTimeout(bd,1));return aJ};this.supported=this.ok=function(){return au?az&&!ao:aJ.useHTML5Audio&&aJ.hasHTML5};this.getMovie=function(l){return aR(l)||aB[l]||d[l]};this.createSound=function(l,p){function q(){m=bs(m);aJ.sounds[m.id]=new aK(m);aJ.soundIDs.push(m.id);return aJ.sounds[m.id]}var m,n=null;if(!az||!aJ.ok()){return !1}p!==b&&(l={id:l,url:p});m=ar(l);m.url=ag(m.url);void 0===m.id&&(m.id=aJ.setupOptions.idPrefix+g++);if(ax(m.id,!0)){return aJ.sounds[m.id]}if(i(m)){n=q(),n._setup_html5(m)}else{if(aJ.html5Only||aJ.html5.usingFlash&&m.url&&m.url.match(/data\:/i)){return q()}8<aD&&null===m.isMovieStar&&(m.isMovieStar=!(!m.serverURL&&!(m.type&&m.type.match(af)||m.url&&m.url.match(a5))));m=a0(m,void 0);n=q();8===aD?aE._createSound(m.id,m.loops||1,m.usePolicyFile):(aE._createSound(m.id,m.url,m.usePeakData,m.useWaveformData,m.useEQData,m.isMovieStar,m.isMovieStar?m.bufferTime:!1,m.loops||1,m.serverURL,m.duration||null,m.autoPlay,!0,m.autoLoad,m.usePolicyFile),m.serverURL||(n.connected=!0,m.onconnect&&m.onconnect.apply(n)));!m.serverURL&&(m.autoLoad||m.autoPlay)&&n.load(m)}!m.serverURL&&m.autoPlay&&n.play();return n};this.destroySound=function(l,n){if(!ax(l)){return !1}var p=aJ.sounds[l],m;p._iO={};p.stop();p.unload();for(m=0;m<aJ.soundIDs.length;m++){if(aJ.soundIDs[m]===l){aJ.soundIDs.splice(m,1);break}}n||p.destruct(!0);delete aJ.sounds[l];return !0};this.load=function(l,m){return !ax(l)?!1:aJ.sounds[l].load(m)};this.unload=function(l){return !ax(l)?!1:aJ.sounds[l].unload()};this.onposition=this.onPosition=function(l,n,p,m){return !ax(l)?!1:aJ.sounds[l].onposition(n,p,m)};this.clearOnPosition=function(l,m,n){return !ax(l)?!1:aJ.sounds[l].clearOnPosition(m,n)};this.start=this.play=function(l,n){var p=null,m=n&&!(n instanceof Object);if(!az||!aJ.ok()){return !1}if(ax(l,m)){m&&(n={url:n})}else{if(!m){return !1}m&&(n={url:n});n&&n.url&&(n.id=l,p=aJ.createSound(n).play())}null===p&&(p=aJ.sounds[l].play(n));return p};this.setPosition=function(l,m){return !ax(l)?!1:aJ.sounds[l].setPosition(m)};this.stop=function(l){return !ax(l)?!1:aJ.sounds[l].stop()};this.stopAll=function(){for(var l in aJ.sounds){aJ.sounds.hasOwnProperty(l)&&aJ.sounds[l].stop()}};this.pause=function(l){return !ax(l)?!1:aJ.sounds[l].pause()};this.pauseAll=function(){var l;for(l=aJ.soundIDs.length-1;0<=l;l--){aJ.sounds[aJ.soundIDs[l]].pause()}};this.resume=function(l){return !ax(l)?!1:aJ.sounds[l].resume()};this.resumeAll=function(){var l;for(l=aJ.soundIDs.length-1;0<=l;l--){aJ.sounds[aJ.soundIDs[l]].resume()}};this.togglePause=function(l){return !ax(l)?!1:aJ.sounds[l].togglePause()};this.setPan=function(l,m){return !ax(l)?!1:aJ.sounds[l].setPan(m)};this.setVolume=function(l,m){return !ax(l)?!1:aJ.sounds[l].setVolume(m)};this.mute=function(l){var m=0;l instanceof String&&(l=null);if(l){return !ax(l)?!1:aJ.sounds[l].mute()}for(m=aJ.soundIDs.length-1;0<=m;m--){aJ.sounds[aJ.soundIDs[m]].mute()}return aJ.muted=!0};this.muteAll=function(){aJ.mute()};this.unmute=function(l){l instanceof String&&(l=null);if(l){return !ax(l)?!1:aJ.sounds[l].unmute()}for(l=aJ.soundIDs.length-1;0<=l;l--){aJ.sounds[aJ.soundIDs[l]].unmute()}aJ.muted=!1;return !0};this.unmuteAll=function(){aJ.unmute()};this.toggleMute=function(l){return !ax(l)?!1:aJ.sounds[l].toggleMute()};this.getMemoryUse=function(){var l=0;aE&&8!==aD&&(l=parseInt(aE._getMemoryUse(),10));return l};this.disable=function(l){var m;l===b&&(l=!1);if(ao){return !1}ao=!0;for(m=aJ.soundIDs.length-1;0<=m;m--){aM(aJ.sounds[aJ.soundIDs[m]])}a3(l);av.remove(d,"load",bf);return !0};this.canPlayMIME=function(l){var m;aJ.hasHTML5&&(m=aU({type:l}));!m&&au&&(m=l&&aJ.ok()?!!(8<aD&&l.match(af)||l.match(aJ.mimePattern)):null);return m};this.canPlayURL=function(l){var m;aJ.hasHTML5&&(m=aU({url:l}));!m&&au&&(m=l&&aJ.ok()?!!l.match(aJ.filePattern):null);return m};this.canPlayLink=function(l){return l.type!==b&&l.type&&aJ.canPlayMIME(l.type)?!0:aJ.canPlayURL(l.href)};this.getSoundById=function(l,m){return !l?null:aJ.sounds[l]};this.onready=function(l,m){if("function"===typeof l){m||(m=d),aj("onready",l,m),bi()}else{throw aZ("needFunction","onready")}return !0};this.ontimeout=function(l,m){if("function"===typeof l){m||(m=d),aj("ontimeout",l,m),bi({type:"ontimeout"})}else{throw aZ("needFunction","ontimeout")}return !0};this._wD=this._writeDebug=function(l,m){return !0};this._debug=function(){};this.reboot=function(l,q){var r,m,p;for(r=aJ.soundIDs.length-1;0<=r;r--){aJ.sounds[aJ.soundIDs[r]].destruct()}if(aE){try{bk&&(bB=aE.innerHTML),a1=aE.parentNode.removeChild(aE)}catch(n){}}bB=a1=au=aE=null;aJ.enabled=a2=az=aX=bG=a6=a4=ao=bm=aJ.swfLoaded=!1;aJ.soundIDs=[];aJ.sounds={};g=0;if(l){aq=[]}else{for(r in aq){if(aq.hasOwnProperty(r)){m=0;for(p=aq[r].length;m<p;m++){aq[r][m].fired=!1}}}}aJ.html5={usingFlash:null};aJ.flash={};aJ.html5Only=!1;aJ.ignoreFlash=!1;d.setTimeout(function(){bn();q||aJ.beginDelayedInit()},20);return aJ};this.reset=function(){return aJ.reboot(!0,!0)};this.getMoviePercent=function(){return aE&&"PercentLoaded" in aE?aE.PercentLoaded():null};this.beginDelayedInit=function(){bg=!0;bd();setTimeout(function(){if(bG){return !1}by();aN();return bG=!0},20);be()};this.destruct=function(){aJ.disable(!0)};aK=function(F){var B,C,I=this,A,t,H,w,r,l,M=!1,m=[],L=0,G,E,K=null,D;C=B=null;this.sID=this.id=F.id;this.url=F.url;this._iO=this.instanceOptions=this.options=ar(F);this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=!1;this._a=null;D=this.url?!1:!0;this.id3={};this._debug=function(){};this.load=function(n){var q=null,s;n!==b?I._iO=ar(n,I.options):(n=I.options,I._iO=n,K&&K!==I.url&&(I._iO.url=I.url,I.url=null));I._iO.url||(I._iO.url=I.url);I._iO.url=ag(I._iO.url);s=I.instanceOptions=I._iO;if(!s.url&&!I.url){return I}if(s.url===I.url&&0!==I.readyState&&2!==I.readyState){return 3===I.readyState&&s.onload&&bu(I,function(){s.onload.apply(I,[!!I.duration])}),I}I.loaded=!1;I.readyState=1;I.playState=0;I.id3={};if(i(s)){q=I._setup_html5(s),q._called_load||(I._html5_canplay=!1,I.url!==s.url&&(I._a.src=s.url,I.setPosition(0)),I._a.autobuffer="auto",I._a.preload="auto",I._a._called_load=!0)}else{if(aJ.html5Only||I._iO.url&&I._iO.url.match(/data\:/i)){return I}try{I.isHTML5=!1,I._iO=a0(bs(s)),s=I._iO,8===aD?aE._load(I.id,s.url,s.stream,s.autoPlay,s.usePolicyFile):aE._load(I.id,s.url,!!s.stream,!!s.autoPlay,s.loops||1,!!s.autoLoad,s.usePolicyFile)}catch(p){bc({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}I.url=s.url;return I};this.unload=function(){0!==I.readyState&&(I.isHTML5?(w(),I._a&&(I._a.pause(),K=bF(I._a))):8===aD?aE._unload(I.id,"about:blank"):aE._unload(I.id),A());return I};this.destruct=function(n){I.isHTML5?(w(),I._a&&(I._a.pause(),bF(I._a),bm||H(),I._a._s=null,I._a=null)):(I._iO.onfailure=null,aE._destroySound(I.id));n||aJ.destroySound(I.id,!0)};this.start=this.play=function(n,v){var x,u,q,s,p;u=!0;u=null;v=v===b?!0:v;n||(n={});I.url&&(I._iO.url=I.url);I._iO=ar(I._iO,I.options);I._iO=ar(n,I._iO);I._iO.url=ag(I._iO.url);I.instanceOptions=I._iO;if(!I.isHTML5&&I._iO.serverURL&&!I.connected){return I.getAutoPlay()||I.setAutoPlay(!0),I}i(I._iO)&&(I._setup_html5(I._iO),r());1===I.playState&&!I.paused&&(x=I._iO.multiShot,x||(I.isHTML5&&I.setPosition(I._iO.position),u=I));if(null!==u){return u}n.url&&n.url!==I.url&&(!I.readyState&&!I.isHTML5&&8===aD&&D?D=!1:I.load(I._iO));I.loaded||(0===I.readyState?(!I.isHTML5&&!aJ.html5Only?(I._iO.autoPlay=!0,I.load(I._iO)):I.isHTML5?I.load(I._iO):u=I,I.instanceOptions=I._iO):2===I.readyState&&(u=I));if(null!==u){return u}!I.isHTML5&&(9===aD&&0<I.position&&I.position===I.duration)&&(n.position=0);if(I.paused&&0<=I.position&&(!I._iO.serverURL||0<I.position)){I.resume()}else{I._iO=ar(n,I._iO);if(null!==I._iO.from&&null!==I._iO.to&&0===I.instanceCount&&0===I.playState&&!I._iO.serverURL){x=function(){I._iO=ar(n,I._iO);I.play(I._iO)};if(I.isHTML5&&!I._html5_canplay){I.load({_oncanplay:x}),u=!1}else{if(!I.isHTML5&&!I.loaded&&(!I.readyState||2!==I.readyState)){I.load({onload:x}),u=!1}}if(null!==u){return u}I._iO=E()}(!I.instanceCount||I._iO.multiShotEvents||I.isHTML5&&I._iO.multiShot&&!bm||!I.isHTML5&&8<aD&&!I.getAutoPlay())&&I.instanceCount++;I._iO.onposition&&0===I.playState&&l(I);I.playState=1;I.paused=!1;I.position=I._iO.position!==b&&!isNaN(I._iO.position)?I._iO.position:0;I.isHTML5||(I._iO=a0(bs(I._iO)));I._iO.onplay&&v&&(I._iO.onplay.apply(I),M=!0);I.setVolume(I._iO.volume,!0);I.setPan(I._iO.pan,!0);I.isHTML5?2>I.instanceCount?(r(),u=I._setup_html5(),I.setPosition(I._iO.position),u.play()):(q=new Audio(I._iO.url),s=function(){av.remove(q,"ended",s);I._onfinish(I);bF(q);q=null},p=function(){av.remove(q,"canplay",p);try{q.currentTime=I._iO.position/1000}catch(y){}q.play()},av.add(q,"ended",s),void 0!==I._iO.volume&&(q.volume=Math.max(0,Math.min(1,I._iO.volume/100))),I.muted&&(q.muted=!0),I._iO.position?av.add(q,"canplay",p):q.play()):(u=aE._start(I.id,I._iO.loops||1,9===aD?I.position:I.position/1000,I._iO.multiShot||!1),9===aD&&!u&&I._iO.onplayerror&&I._iO.onplayerror.apply(I))}return I};this.stop=function(n){var p=I._iO;1===I.playState&&(I._onbufferchange(0),I._resetOnPosition(0),I.paused=!1,I.isHTML5||(I.playState=0),G(),p.to&&I.clearOnPosition(p.to),I.isHTML5?I._a&&(n=I.position,I.setPosition(0),I.position=n,I._a.pause(),I.playState=0,I._onTimer(),w()):(aE._stop(I.id,n),p.serverURL&&I.unload()),I.instanceCount=0,I._iO={},p.onstop&&p.onstop.apply(I));return I};this.setAutoPlay=function(n){I._iO.autoPlay=n;I.isHTML5||(aE._setAutoPlay(I.id,n),n&&!I.instanceCount&&1===I.readyState&&I.instanceCount++)};this.getAutoPlay=function(){return I._iO.autoPlay};this.setPosition=function(n){n===b&&(n=0);var q=I.isHTML5?Math.max(n,0):Math.min(I.duration||I._iO.duration,Math.max(n,0));I.position=q;n=I.position/1000;I._resetOnPosition(I.position);I._iO.position=q;if(I.isHTML5){if(I._a){if(I._html5_canplay){if(I._a.currentTime!==n){try{I._a.currentTime=n,(0===I.playState||I.paused)&&I._a.pause()}catch(p){}}}else{if(n){return I}}I.paused&&I._onTimer(!0)}}else{n=9===aD?I.position:n,I.readyState&&2!==I.readyState&&aE._setPosition(I.id,n,I.paused||!I.playState,I._iO.multiShot)}return I};this.pause=function(n){if(I.paused||0===I.playState&&1!==I.readyState){return I}I.paused=!0;I.isHTML5?(I._setup_html5().pause(),w()):(n||n===b)&&aE._pause(I.id,I._iO.multiShot);I._iO.onpause&&I._iO.onpause.apply(I);return I};this.resume=function(){var n=I._iO;if(!I.paused){return I}I.paused=!1;I.playState=1;I.isHTML5?(I._setup_html5().play(),r()):(n.isMovieStar&&!n.serverURL&&I.setPosition(I.position),aE._pause(I.id,n.multiShot));!M&&n.onplay?(n.onplay.apply(I),M=!0):n.onresume&&n.onresume.apply(I);return I};this.togglePause=function(){if(0===I.playState){return I.play({position:9===aD&&!I.isHTML5?I.position:I.position/1000}),I}I.paused?I.resume():I.pause();return I};this.setPan=function(n,p){n===b&&(n=0);p===b&&(p=!1);I.isHTML5||aE._setPan(I.id,n);I._iO.pan=n;p||(I.pan=n,I.options.pan=n);return I};this.setVolume=function(n,p){n===b&&(n=100);p===b&&(p=!1);I.isHTML5?I._a&&(aJ.muted&&!I.muted&&(I.muted=!0,I._a.muted=!0),I._a.volume=Math.max(0,Math.min(1,n/100))):aE._setVolume(I.id,aJ.muted&&!I.muted||I.muted?0:n);I._iO.volume=n;p||(I.volume=n,I.options.volume=n);return I};this.mute=function(){I.muted=!0;I.isHTML5?I._a&&(I._a.muted=!0):aE._setVolume(I.id,0);return I};this.unmute=function(){I.muted=!1;var n=I._iO.volume!==b;I.isHTML5?I._a&&(I._a.muted=!1):aE._setVolume(I.id,n?I._iO.volume:I.options.volume);return I};this.toggleMute=function(){return I.muted?I.unmute():I.mute()};this.onposition=this.onPosition=function(n,q,p){m.push({position:parseInt(n,10),method:q,scope:p!==b?p:I,fired:!1});return I};this.clearOnPosition=function(p,n){var q;p=parseInt(p,10);if(isNaN(p)){return !1}for(q=0;q<m.length;q++){if(p===m[q].position&&(!n||n===m[q].method)){m[q].fired&&L--,m.splice(q,1)}}};this._processOnPosition=function(){var n,p;n=m.length;if(!n||!I.playState||L>=n){return !1}for(n-=1;0<=n;n--){p=m[n],!p.fired&&I.position>=p.position&&(p.fired=!0,L++,p.method.apply(p.scope,[p.position]))}return !0};this._resetOnPosition=function(p){var n,q;n=m.length;if(!n){return !1}for(n-=1;0<=n;n--){q=m[n],q.fired&&p<=q.position&&(q.fired=!1,L--)}return !0};E=function(){var n=I._iO,u=n.from,q=n.to,s,p;p=function(){I.clearOnPosition(q,p);I.stop()};s=function(){if(null!==q&&!isNaN(q)){I.onPosition(q,p)}};null!==u&&!isNaN(u)&&(n.position=u,n.multiShot=!1,s());return n};l=function(){var n,p=I._iO.onposition;if(p){for(n in p){if(p.hasOwnProperty(n)){I.onPosition(parseInt(n,10),p[n])}}}};G=function(){var n,p=I._iO.onposition;if(p){for(n in p){p.hasOwnProperty(n)&&I.clearOnPosition(parseInt(n,10))}}};r=function(){I.isHTML5&&ad(I)};w=function(){I.isHTML5&&f(I)};A=function(n){n||(m=[],L=0);M=!1;I._hasTimer=null;I._a=null;I._html5_canplay=!1;I.bytesLoaded=null;I.bytesTotal=null;I.duration=I._iO&&I._iO.duration?I._iO.duration:null;I.durationEstimate=null;I.buffered=[];I.eqData=[];I.eqData.left=[];I.eqData.right=[];I.failures=0;I.isBuffering=!1;I.instanceOptions={};I.instanceCount=0;I.loaded=!1;I.metadata={};I.readyState=0;I.muted=!1;I.paused=!1;I.peakData={left:0,right:0};I.waveformData={left:[],right:[]};I.playState=0;I.position=null;I.id3={}};A();this._onTimer=function(n){var s,q=!1,p={};if(I._hasTimer||n){if(I._a&&(n||(0<I.playState||1===I.readyState)&&!I.paused)){s=I._get_html5_duration(),s!==B&&(B=s,I.duration=s,q=!0),I.durationEstimate=I.duration,s=1000*I._a.currentTime||0,s!==C&&(C=s,q=!0),(q||n)&&I._whileplaying(s,p,p,p,p)}return q}};this._get_html5_duration=function(){var n=I._iO;return(n=I._a&&I._a.duration?1000*I._a.duration:n&&n.duration?n.duration:null)&&!isNaN(n)&&Infinity!==n?n:null};this._apply_loop=function(p,n){p.loop=1<n?"loop":""};this._setup_html5=function(n){n=ar(I._iO,n);var s=bm?ak:I._a,p=decodeURI(n.url),q;bm?p===decodeURI(a8)&&(q=!0):p===decodeURI(K)&&(q=!0);if(s){if(s._s){if(bm){s._s&&(s._s.playState&&!q)&&s._s.stop()}else{if(!bm&&p===decodeURI(K)){return I._apply_loop(s,n.loops),s}}}q||(K&&A(!1),s.src=n.url,a8=K=I.url=n.url,s._called_load=!1)}else{n.autoLoad||n.autoPlay?(I._a=new Audio(n.url),I._a.load()):I._a=ai&&10>opera.version()?new Audio(null):new Audio,s=I._a,s._called_load=!1,bm&&(ak=s)}I.isHTML5=!0;I._a=s;s._s=I;t();I._apply_loop(s,n.loops);n.autoLoad||n.autoPlay?I.load():(s.autobuffer=!1,s.preload="auto");return s};t=function(){if(I._a._added_events){return !1}var n;I._a._added_events=!0;for(n in bl){bl.hasOwnProperty(n)&&I._a&&I._a.addEventListener(n,bl[n],!1)}return !0};H=function(){var n;I._a._added_events=!1;for(n in bl){bl.hasOwnProperty(n)&&I._a&&I._a.removeEventListener(n,bl[n],!1)}};this._onload=function(n){var p=!!n||!I.isHTML5&&8===aD&&I.duration;I.loaded=p;I.readyState=p?3:2;I._onbufferchange(0);I._iO.onload&&bu(I,function(){I._iO.onload.apply(I,[p])});return !0};this._onbufferchange=function(n){if(0===I.playState||n&&I.isBuffering||!n&&!I.isBuffering){return !1}I.isBuffering=1===n;I._iO.onbufferchange&&I._iO.onbufferchange.apply(I);return !0};this._onsuspend=function(){I._iO.onsuspend&&I._iO.onsuspend.apply(I);return !0};this._onfailure=function(n,q,p){I.failures++;if(I._iO.onfailure&&1===I.failures){I._iO.onfailure(I,n,q,p)}};this._onfinish=function(){var n=I._iO.onfinish;I._onbufferchange(0);I._resetOnPosition(0);I.instanceCount&&(I.instanceCount--,I.instanceCount||(G(),I.playState=0,I.paused=!1,I.instanceCount=0,I.instanceOptions={},I._iO={},w(),I.isHTML5&&(I.position=0)),(!I.instanceCount||I._iO.multiShotEvents)&&n&&bu(I,function(){n.apply(I)}))};this._whileloading=function(n,u,q,s){var p=I._iO;I.bytesLoaded=n;I.bytesTotal=u;I.duration=Math.floor(q);I.bufferLength=s;I.durationEstimate=!I.isHTML5&&!p.isMovieStar?p.duration?I.duration>p.duration?I.duration:p.duration:parseInt(I.bytesTotal/I.bytesLoaded*I.duration,10):I.duration;I.isHTML5||(I.buffered=[{start:0,end:I.duration}]);(3!==I.readyState||I.isHTML5)&&p.whileloading&&p.whileloading.apply(I)};this._whileplaying=function(n,v,s,u,q){var p=I._iO;if(isNaN(n)||null===n){return !1}I.position=Math.max(0,n);I._processOnPosition();!I.isHTML5&&8<aD&&(p.usePeakData&&(v!==b&&v)&&(I.peakData={left:v.leftPeak,right:v.rightPeak}),p.useWaveformData&&(s!==b&&s)&&(I.waveformData={left:s.split(","),right:u.split(",")}),p.useEQData&&(q!==b&&q&&q.leftEQ)&&(n=q.leftEQ.split(","),I.eqData=n,I.eqData.left=n,q.rightEQ!==b&&q.rightEQ&&(I.eqData.right=q.rightEQ.split(","))));1===I.playState&&(!I.isHTML5&&(8===aD&&!I.position&&I.isBuffering)&&I._onbufferchange(0),p.whileplaying&&p.whileplaying.apply(I));return !0};this._oncaptiondata=function(n){I.captiondata=n;I._iO.oncaptiondata&&I._iO.oncaptiondata.apply(I,[n])};this._onmetadata=function(n,u){var q={},s,p;s=0;for(p=n.length;s<p;s++){q[n[s]]=u[s]}I.metadata=q;I._iO.onmetadata&&I._iO.onmetadata.apply(I)};this._onid3=function(n,u){var q=[],s,p;s=0;for(p=n.length;s<p;s++){q[n[s]]=u[s]}I.id3=ar(I.id3,q);I._iO.onid3&&I._iO.onid3.apply(I)};this._onconnect=function(n){n=1===n;if(I.connected=n){I.failures=0,ax(I.id)&&(I.getAutoPlay()?I.play(b,I.getAutoPlay()):I._iO.autoLoad&&I.load()),I._iO.onconnect&&I._iO.onconnect.apply(I,[n])}};this._ondataerror=function(n){0<I.playState&&I._iO.ondataerror&&I._iO.ondataerror.apply(I)}};al=function(){return aB.body||aB.getElementsByTagName("div")[0]};aR=function(l){return aB.getElementById(l)};ar=function(l,p){var q=l||{},m,n;m=p===b?aJ.defaultOptions:p;for(n in m){m.hasOwnProperty(n)&&q[n]===b&&(q[n]="object"!==typeof m[n]||null===m[n]?m[n]:ar(q[n],m[n]))}return q};bu=function(l,m){!l.isHTML5&&8===aD?d.setTimeout(m,0):m()};aQ={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};aI=function(l,q){var r,m=!0,p=q!==b,n=aJ.setupOptions;for(r in l){if(l.hasOwnProperty(r)){if("object"!==typeof l[r]||null===l[r]||l[r] instanceof Array||l[r] instanceof RegExp){p&&aQ[q]!==b?aJ[q][r]=l[r]:n[r]!==b?(aJ.setupOptions[r]=l[r],aJ[r]=l[r]):aQ[r]===b?m=!1:aJ[r] instanceof Function?aJ[r].apply(aJ,l[r] instanceof Array?l[r]:[l[r]]):aJ[r]=l[r]}else{if(aQ[r]===b){m=!1}else{return aI(l[r],r)}}}}return m};av=function(){function l(r){r=bE.call(r);var q=r.length;n?(r[1]="on"+r[1],3<q&&r.pop()):3===q&&r.push(!1);return r}function p(q,t){var r=q.shift(),s=[m[t]];if(n){r[s](q[0],q[1])}else{r[s].apply(r,q)}}var n=d.attachEvent,m={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:function(){p(l(arguments),"add")},remove:function(){p(l(arguments),"remove")}}}();bl={abort:ay(function(){}),canplay:ay(function(){var l=this._s,n;if(l._html5_canplay){return !0}l._html5_canplay=!0;l._onbufferchange(0);n=l._iO.position!==b&&!isNaN(l._iO.position)?l._iO.position/1000:null;if(l.position&&this.currentTime!==n){try{this.currentTime=n}catch(m){}}l._iO._oncanplay&&l._iO._oncanplay()}),canplaythrough:ay(function(){var l=this._s;l.loaded||(l._onbufferchange(0),l._whileloading(l.bytesLoaded,l.bytesTotal,l._get_html5_duration()),l._onload(!0))}),ended:ay(function(){this._s._onfinish()}),error:ay(function(){this._s._onload(!1)}),loadeddata:ay(function(){var l=this._s;!l._loaded&&!aG&&(l.duration=l._get_html5_duration())}),loadedmetadata:ay(function(){}),loadstart:ay(function(){this._s._onbufferchange(1)}),play:ay(function(){this._s._onbufferchange(0)}),playing:ay(function(){this._s._onbufferchange(0)}),progress:ay(function(l){var r=this._s,q,m,p=0,p=l.target.buffered;q=l.loaded||0;var n=l.total||1;r.buffered=[];if(p&&p.length){q=0;for(m=p.length;q<m;q++){r.buffered.push({start:1000*p.start(q),end:1000*p.end(q)})}p=1000*(p.end(0)-p.start(0));q=Math.min(1,p/(1000*l.target.duration))}isNaN(q)||(r._onbufferchange(0),r._whileloading(q,n,r._get_html5_duration()),q&&(n&&q===n)&&bl.canplaythrough.call(this,l))}),ratechange:ay(function(){}),suspend:ay(function(l){var m=this._s;bl.progress.call(this,l);m._onsuspend()}),stalled:ay(function(){}),timeupdate:ay(function(){this._s._onTimer()}),waiting:ay(function(){this._s._onbufferchange(1)})};i=function(l){return !l||!l.type&&!l.url&&!l.serverURL?!1:l.serverURL||l.type&&aS(l.type)?!1:l.type?aU({type:l.type}):aU({url:l.url})||aJ.html5Only||l.url.match(/data\:/i)};bF=function(l){var m;l&&(m=aG?"about:blank":aJ.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w\x3d\x3d":"about:blank",l.src=m,void 0!==l._called_unload&&(l._called_load=!1));bm&&(a8=null);return m};aU=function(l){if(!aJ.useHTML5Audio||!aJ.hasHTML5){return !1}var n=l.url||null;l=l.type||null;var p=aJ.audioFormats,m;if(l&&aJ.html5[l]!==b){return aJ.html5[l]&&!aS(l)}if(!an){an=[];for(m in p){p.hasOwnProperty(m)&&(an.push(m),p[m].related&&(an=an.concat(p[m].related)))}an=RegExp("\\.("+an.join("|")+")(\\?.*)?$","i")}m=n?n.toLowerCase().match(an):null;!m||!m.length?l&&(n=l.indexOf(";"),m=(-1!==n?l.substr(0,n):l).substr(6)):m=m[1];m&&aJ.html5[m]!==b?n=aJ.html5[m]&&!aS(m):(l="audio/"+m,n=aJ.html5.canPlayType({type:l}),n=(aJ.html5[m]=n)&&aJ.html5[l]&&!aS(l));return n};ap=function(){function l(u){var t,v=t=!1;if(!r||"function"!==typeof r.canPlayType){return t}if(u instanceof Array){p=0;for(t=u.length;p<t;p++){if(aJ.html5[u[p]]||r.canPlayType(u[p]).match(aJ.html5Test)){v=!0,aJ.html5[u[p]]=!0,aJ.flash[u[p]]=!!u[p].match(aY)}}t=v}else{u=r&&"function"===typeof r.canPlayType?r.canPlayType(u):!1,t=!(!u||!u.match(aJ.html5Test))}return t}if(!aJ.useHTML5Audio||!aJ.hasHTML5){return au=aJ.html5.usingFlash=!0,!1}var r=Audio!==b?ai&&10>opera.version()?new Audio(null):new Audio:null,s,m,q={},n,p;n=aJ.audioFormats;for(s in n){if(n.hasOwnProperty(s)&&(m="audio/"+s,q[s]=l(n[s].type),q[m]=q[s],s.match(aY)?(aJ.flash[s]=!0,aJ.flash[m]=!0):(aJ.flash[s]=!1,aJ.flash[m]=!1),n[s]&&n[s].related)){for(p=n[s].related.length-1;0<=p;p--){q["audio/"+n[s].related[p]]=q[s],aJ.html5[n[s].related[p]]=q[s],aJ.flash[n[s].related[p]]=q[s]}}}q.canPlayType=r?l:null;aJ.html5=ar(aJ.html5,q);aJ.html5.usingFlash=aO();au=aJ.html5.usingFlash;return !0};bz={};aZ=function(){};bs=function(l){8===aD&&(1<l.loops&&l.stream)&&(l.stream=!1);return l};a0=function(l,m){if(l&&!l.usePolicyFile&&(l.onid3||l.usePeakData||l.useWaveformData||l.useEQData)){l.usePolicyFile=!0}return l};bH=function(){return !1};aM=function(l){for(var m in l){l.hasOwnProperty(m)&&"function"===typeof l[m]&&(l[m]=bH)}};e=function(l){l===b&&(l=!1);(ao||l)&&aJ.disable(l)};am=function(l){var m=null;if(l){if(l.match(/\.swf(\?.*)?$/i)){if(m=l.substr(l.toLowerCase().lastIndexOf(".swf?")+4)){return l}}else{l.lastIndexOf("/")!==l.length-1&&(l+="/")}}l=(l&&-1!==l.lastIndexOf("/")?l.substr(0,l.lastIndexOf("/")+1):"./")+aJ.movieURL;aJ.noSWFCache&&(l+="?ts\x3d"+(new Date).getTime());return l};bJ=function(){aD=parseInt(aJ.flashVersion,10);8!==aD&&9!==aD&&(aJ.flashVersion=aD=8);var l=aJ.debugMode||aJ.debugFlash?"_debug.swf":".swf";aJ.useHTML5Audio&&(!aJ.html5Only&&aJ.audioFormats.mp4.required&&9>aD)&&(aJ.flashVersion=aD=9);aJ.version=aJ.versionNumber+(aJ.html5Only?" (HTML5-only mode)":9===aD?" (AS3/Flash 9)":" (AS2/Flash 8)");8<aD?(aJ.defaultOptions=ar(aJ.defaultOptions,aJ.flash9Options),aJ.features.buffering=!0,aJ.defaultOptions=ar(aJ.defaultOptions,aJ.movieStarOptions),aJ.filePatterns.flash9=RegExp("\\.(mp3|"+h.join("|")+")(\\?.*)?$","i"),aJ.features.movieStar=!0):aJ.features.movieStar=!1;aJ.filePattern=aJ.filePatterns[8!==aD?"flash9":"flash8"];aJ.movieURL=(8===aD?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",l);aJ.features.peakData=aJ.features.waveformData=aJ.features.eqData=8<aD};bo=function(l,m){if(!aE){return !1}aE._setPolling(l,m)};ac=function(){};ax=this.getSoundById;a9=function(){var l=[];aJ.debugMode&&l.push("sm2_debug");aJ.debugFlash&&l.push("flash_debug");aJ.useHighPerformance&&l.push("high_performance");return l.join(" ")};bp=function(){aZ("fbHandler");var l=aJ.getMoviePercent(),m={type:"FLASHBLOCK"};if(aJ.html5Only){return !1}aJ.ok()?aJ.oMC&&(aJ.oMC.className=[a9(),"movieContainer","swf_loaded"+(aJ.didFlashBlock?" swf_unblocked":"")].join(" ")):(au&&(aJ.oMC.className=a9()+" movieContainer "+(null===l?"swf_timedout":"swf_error")),aJ.didFlashBlock=!0,bi({type:"ontimeout",ignoreInit:!0,error:m}),bc(m))};aj=function(l,n,m){aq[l]===b&&(aq[l]=[]);aq[l].push({method:n,scope:m||null,fired:!1})};bi=function(l){l||(l={type:aJ.ok()?"onready":"ontimeout"});if(!az&&l&&!l.ignoreInit||"ontimeout"===l.type&&(aJ.ok()||ao&&!l.ignoreInit)){return !1}var q={success:l&&l.ignoreInit?aJ.ok():!ao},r=l&&l.type?aq[l.type]||[]:[],m=[],p,q=[q],n=au&&!aJ.ok();l.error&&(q[0].error=l.error);l=0;for(p=r.length;l<p;l++){!0!==r[l].fired&&m.push(r[l])}if(m.length){l=0;for(p=m.length;l<p;l++){m[l].scope?m[l].method.apply(m[l].scope,q):m[l].method.apply(this,q),n||(m[l].fired=!0)}}return !0};bf=function(){d.setTimeout(function(){aJ.useFlashBlock&&bp();bi();"function"===typeof aJ.onload&&aJ.onload.apply(d);aJ.waitForWindowLoad&&av.add(d,"load",bf)},1)};aH=function(){if(at!==b){return at}var l=!1,r=navigator,q=r.plugins,m,p=d.ActiveXObject;if(q&&q.length){(r=r.mimeTypes)&&(r["application/x-shockwave-flash"]&&r["application/x-shockwave-flash"].enabledPlugin&&r["application/x-shockwave-flash"].enabledPlugin.description)&&(l=!0)}else{if(p!==b&&!aw.match(/MSAppHost/i)){try{m=new p("ShockwaveFlash.ShockwaveFlash")}catch(n){m=null}l=!!m}}return at=l};aO=function(){var l,m,n=aJ.audioFormats;if(a7&&aw.match(/os (1|2|3_0|3_1)/i)){aJ.hasHTML5=!1,aJ.html5Only=!0,aJ.oMC&&(aJ.oMC.style.display="none")}else{if(aJ.useHTML5Audio&&(!aJ.html5||!aJ.html5.canPlayType)){aJ.hasHTML5=!1}}if(aJ.useHTML5Audio&&aJ.hasHTML5){for(m in aV=!0,n){if(n.hasOwnProperty(m)&&n[m].required){if(aJ.html5.canPlayType(n[m].type)){if(aJ.preferFlash&&(aJ.flash[m]||aJ.flash[n[m].type])){l=!0}}else{aV=!1,l=!0}}}}aJ.ignoreFlash&&(l=!1,aV=!0);aJ.html5Only=aJ.hasHTML5&&aJ.useHTML5Audio&&!l;return !aJ.html5Only};ag=function(l){var n,p,m=0;if(l instanceof Array){n=0;for(p=l.length;n<p;n++){if(l[n] instanceof Object){if(aJ.canPlayMIME(l[n].type)){m=n;break}}else{if(aJ.canPlayURL(l[n])){m=n;break}}}l[m].url&&(l[m]=l[m].url);l=l[m]}return l};ad=function(l){l._hasTimer||(l._hasTimer=!0,!k&&aJ.html5PollingInterval&&(null===aW&&0===aC&&(aW=setInterval(bC,aJ.html5PollingInterval)),aC++))};f=function(l){l._hasTimer&&(l._hasTimer=!1,!k&&aJ.html5PollingInterval&&aC--)};bC=function(){var l;if(null!==aW&&!aC){return clearInterval(aW),aW=null,!1}for(l=aJ.soundIDs.length-1;0<=l;l--){aJ.sounds[aJ.soundIDs[l]].isHTML5&&aJ.sounds[aJ.soundIDs[l]]._hasTimer&&aJ.sounds[aJ.soundIDs[l]]._onTimer()}};bc=function(l){l=l!==b?l:{};"function"===typeof aJ.onerror&&aJ.onerror.apply(d,[{type:l.type!==b?l.type:null}]);l.fatal!==b&&l.fatal&&aJ.disable()};ae=function(){if(!bj||!aH()){return !1}var l=aJ.audioFormats,m,n;for(n in l){if(l.hasOwnProperty(n)&&("mp3"===n||"mp4"===n)){if(aJ.html5[n]=!1,l[n]&&l[n].related){for(m=l[n].related.length-1;0<=m;m--){aJ.html5[l[n].related[m]]=!1}}}}};this._setSandboxType=function(l){};this._externalInterfaceOK=function(l){if(aJ.swfLoaded){return !1}aJ.swfLoaded=!0;ah=!1;bj&&ae();setTimeout(bw,bk?100:1)};by=function(B,z){function A(m,l){return'\x3cparam name\x3d"'+m+'" value\x3d"'+l+'" /\x3e'}if(a6&&a4){return !1}if(aJ.html5Only){return bJ(),aJ.oMC=aR(aJ.movieID),bw(),a4=a6=!0,!1}var C=z||aJ.url,y=aJ.altURL||C,w=al(),x=a9(),v=null,v=aB.getElementsByTagName("html")[0],u,t,s,v=v&&v.dir&&v.dir.match(/rtl/i);B=B===b?aJ.id:B;bJ();aJ.url=am(bx?C:y);z=aJ.url;aJ.wmode=!aJ.wmode&&aJ.useHighPerformance?"transparent":aJ.wmode;if(null!==aJ.wmode&&(aw.match(/msie 8/i)||!bk&&!aJ.useHighPerformance)&&navigator.platform.match(/win32|win64/i)){bq.push(bz.spcWmode),aJ.wmode=null}w={name:B,id:B,src:z,quality:"high",allowScriptAccess:aJ.allowScriptAccess,bgcolor:aJ.bgColor,pluginspage:aA+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:aJ.wmode,hasPriority:"true"};aJ.debugFlash&&(w.FlashVars="debug\x3d1");aJ.wmode||delete w.wmode;if(bk){C=aB.createElement("div"),t=['\x3cobject id\x3d"'+B+'" data\x3d"'+z+'" type\x3d"'+w.type+'" title\x3d"'+w.title+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase\x3d"'+aA+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version\x3d6,0,40,0"\x3e',A("movie",z),A("AllowScriptAccess",aJ.allowScriptAccess),A("quality",w.quality),aJ.wmode?A("wmode",aJ.wmode):"",A("bgcolor",aJ.bgColor),A("hasPriority","true"),aJ.debugFlash?A("FlashVars",w.FlashVars):"","\x3c/object\x3e"].join("")}else{for(u in C=aB.createElement("embed"),w){w.hasOwnProperty(u)&&C.setAttribute(u,w[u])}}ac();x=a9();if(w=al()){if(aJ.oMC=aR(aJ.movieID)||aB.createElement("div"),aJ.oMC.id){s=aJ.oMC.className,aJ.oMC.className=(s?s+" ":"movieContainer")+(x?" "+x:""),aJ.oMC.appendChild(C),bk&&(u=aJ.oMC.appendChild(aB.createElement("div")),u.className="sm2-object-box",u.innerHTML=t),a4=!0}else{aJ.oMC.id=aJ.movieID;aJ.oMC.className="movieContainer "+x;u=x=null;aJ.useFlashBlock||(aJ.useHighPerformance?x={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(x={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},v&&(x.left=Math.abs(parseInt(x.left,10))+"px")));bt&&(aJ.oMC.style.zIndex=10000);if(!aJ.debugFlash){for(s in x){x.hasOwnProperty(s)&&(aJ.oMC.style[s]=x[s])}}try{bk||aJ.oMC.appendChild(C),w.appendChild(aJ.oMC),bk&&(u=aJ.oMC.appendChild(aB.createElement("div")),u.className="sm2-object-box",u.innerHTML=t),a4=!0}catch(n){throw Error(aZ("domError")+" \n"+n.toString())}}}return a6=!0};aN=function(){if(aJ.html5Only){return by(),!1}if(aE||!aJ.url){return !1}aE=aJ.getMovie(aJ.id);aE||(a1?(bk?aJ.oMC.innerHTML=bB:aJ.oMC.appendChild(a1),a1=null,a6=!0):by(aJ.id,aJ.url),aE=aJ.getMovie(aJ.id));"function"===typeof aJ.oninitmovie&&setTimeout(aJ.oninitmovie,1);return !0};be=function(){setTimeout(bA,1000)};o=function(){d.setTimeout(function(){aJ.setup({preferFlash:!1}).reboot();aJ.didFlashBlock=!0;aJ.beginDelayedInit()},1)};bA=function(){var l,m=!1;if(!aJ.url||aX){return !1}aX=!0;av.remove(d,"load",be);if(at&&ah&&!bI){return !1}az||(l=aJ.getMoviePercent(),0<l&&100>l&&(m=!0));setTimeout(function(){l=aJ.getMoviePercent();if(m){return aX=!1,d.setTimeout(be,1),!1}!az&&br&&(null===l?aJ.useFlashBlock||0===aJ.flashLoadTimeout?aJ.useFlashBlock&&bp():!aJ.useFlashBlock&&aV?o():bi({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}}):0!==aJ.flashLoadTimeout&&(!aJ.useFlashBlock&&aV?o():e(!0)))},aJ.flashLoadTimeout)};aP=function(){if(bI||!ah){return av.remove(d,"focus",aP),!0}bI=br=!0;aX=!1;be();av.remove(d,"focus",aP);return !0};a3=function(l){if(az){return !1}if(aJ.html5Only){return az=!0,bf(),!0}var m=!0,n;if(!aJ.useFlashBlock||!aJ.flashLoadTimeout||aJ.getMoviePercent()){az=!0}n={type:!at&&au?"NO_FLASH":"INIT_TIMEOUT"};if(ao||l){aJ.useFlashBlock&&aJ.oMC&&(aJ.oMC.className=a9()+" "+(null===aJ.getMoviePercent()?"swf_timedout":"swf_error")),bi({type:"ontimeout",error:n,ignoreInit:!0}),bc(n),m=!1}ao||(aJ.waitForWindowLoad&&!bg?av.add(d,"load",bf):bf());return m};bK=function(){var l,m=aJ.setupOptions;for(l in m){m.hasOwnProperty(l)&&(aJ[l]===b?aJ[l]=m[l]:aJ[l]!==m[l]&&(aJ.setupOptions[l]=aJ[l]))}};bw=function(){if(az){return !1}if(aJ.html5Only){return az||(av.remove(d,"load",aJ.beginDelayedInit),aJ.enabled=!0,a3()),!0}aN();try{aE._externalInterfaceTest(!1),bo(!0,aJ.flashPollingInterval||(aJ.useHighPerformance?10:50)),aJ.debugMode||aE._disableDebug(),aJ.enabled=!0,aJ.html5Only||av.add(d,"unload",bH)}catch(l){return bc({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),e(!0),a3(),!1}a3();av.remove(d,"load",aJ.beginDelayedInit);return !0};bd=function(){if(a2){return !1}a2=!0;bK();ac();!at&&aJ.hasHTML5&&aJ.setup({useHTML5Audio:!0,preferFlash:!1});ap();!at&&au&&(bq.push(bz.needFlash),aJ.setup({flashLoadTimeout:1}));aB.removeEventListener&&aB.removeEventListener("DOMContentLoaded",bd,!1);aN();return !0};bv=function(){"complete"===aB.readyState&&(bd(),aB.detachEvent("onreadystatechange",bv));return !0};aL=function(){bg=!0;av.remove(d,"load",aL)};bn=function(){if(k&&(aJ.setupOptions.useHTML5Audio=!0,aJ.setupOptions.preferFlash=!1,a7||bD&&!aw.match(/android\s2\.3/i))){a7&&(aJ.ignoreFlash=!0),bm=!0}};bn();aH();av.add(d,"focus",aP);av.add(d,"load",be);av.add(d,"load",aL);aB.addEventListener?aB.addEventListener("DOMContentLoaded",bd,!1):aB.attachEvent?aB.attachEvent("onreadystatechange",bv):bc({type:"NO_DOM2_EVENTS",fatal:!0})}var c=null;if(void 0===d.SM2_DEFER||!SM2_DEFER){c=new a}d.SoundManager=a;d.soundManager=c})(window);
var threeSixtyPlayer,ThreeSixtyPlayer;!function(a){function t(){var t=this,e=this,n=soundManager,i=navigator.userAgent,s=i.match(/msie/i),o=i.match(/opera/i),d=i.match(/safari/i),r=i.match(/chrome/i),l=(i.match(/firefox/i),i.match(/ipad|iphone/i)),u="undefined"==typeof a.G_vmlCanvasManager&&"undefined"!=typeof document.createElement("canvas").getContext("2d"),c=o||r?359.9:360;this.excludeClass="threesixty-exclude",this.links=[],this.sounds=[],this.soundsByURL=[],this.indexByURL=[],this.lastSound=null,this.lastTouchedSound=null,this.soundCount=0,this.oUITemplate=null,this.oUIImageMap=null,this.vuMeter=null,this.callbackCount=0,this.peakDataHistory=[],this.config={playNext:!1,autoPlay:!1,allowMultiple:!1,loadRingColor:"#ccc",playRingColor:"#000",backgroundRingColor:"#eee",segmentRingColor:"rgba(255,255,255,0.33)",segmentRingColorAlt:"rgba(0,0,0,0.1)",loadRingColorMetadata:"#ddd",playRingColorMetadata:"rgba(128,192,256,0.9)",circleDiameter:null,circleRadius:null,animDuration:500,animTransition:a.Animator.tx.bouncy,showHMSTime:!1,scaleFont:!0,useWaveformData:!1,waveformDataColor:"#0099ff",waveformDataDownsample:3,waveformDataOutside:!1,waveformDataConstrain:!1,waveformDataLineRatio:.64,useEQData:!1,eqDataColor:"#339933",eqDataDownsample:4,eqDataOutside:!0,eqDataLineRatio:.54,usePeakData:!0,peakDataColor:"#ff33ff",peakDataOutside:!0,peakDataLineRatio:.5,useAmplifier:!0,fontSizeMax:null,scaleArcWidth:1,useFavIcon:!1},this.css={sDefault:"sm2_link",sBuffering:"sm2_buffering",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler="undefined"!=typeof a.addEventListener?function(a,t,e){return a.addEventListener(t,e,!1)}:function(a,t,e){a.attachEvent("on"+t,e)},this.removeEventHandler="undefined"!=typeof a.removeEventListener?function(a,t,e){return a.removeEventListener(t,e,!1)}:function(a,t,e){return a.detachEvent("on"+t,e)},this.hasClass=function(a,t){return"undefined"!=typeof a.className?a.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):!1},this.addClass=function(a,e){return a&&e&&!t.hasClass(a,e)?void(a.className=(a.className?a.className+" ":"")+e):!1},this.removeClass=function(a,e){return a&&e&&t.hasClass(a,e)?void(a.className=a.className.replace(new RegExp("( "+e+")|("+e+")","g"),"")):!1},this.getElementsByClassName=function(a,e,n){var i,s,o=n||document,d=[],r=[];if("undefined"!=typeof e&&"string"!=typeof e)for(i=e.length;i--;)r&&r[e[i]]||(r[e[i]]=o.getElementsByTagName(e[i]));else r=e?o.getElementsByTagName(e):o.all||o.getElementsByTagName("*");if("string"!=typeof e)for(i=e.length;i--;)for(s=r[e[i]].length;s--;)t.hasClass(r[e[i]][s],a)&&d.push(r[e[i]][s]);else for(i=0;i<r.length;i++)t.hasClass(r[i],a)&&d.push(r[i]);return d},this.getParentByNodeName=function(a,t){if(!a||!t)return!1;for(t=t.toLowerCase();a.parentNode&&t!==a.parentNode.nodeName.toLowerCase();)a=a.parentNode;return a.parentNode&&t===a.parentNode.nodeName.toLowerCase()?a.parentNode:null},this.getParentByClassName=function(a,e){if(!a||!e)return!1;for(;a.parentNode&&!t.hasClass(a.parentNode,e);)a=a.parentNode;return a.parentNode&&t.hasClass(a.parentNode,e)?a.parentNode:null},this.getSoundByURL=function(a){return"undefined"!=typeof t.soundsByURL[a]?t.soundsByURL[a]:null},this.isChildOfNode=function(a,t){if(!a||!a.parentNode)return!1;t=t.toLowerCase();do a=a.parentNode;while(a&&a.parentNode&&a.nodeName.toLowerCase()!==t);return a&&a.nodeName.toLowerCase()===t?a:null},this.isChildOfClass=function(a,e){if(!a||!e)return!1;for(;a.parentNode&&!t.hasClass(a,e);)a=t.findParent(a);return t.hasClass(a,e)},this.findParent=function(a){if(!a||!a.parentNode)return!1;if(a=a.parentNode,2===a.nodeType)for(;a&&a.parentNode&&2===a.parentNode.nodeType;)a=a.parentNode;return a},this.getStyle=function(t,e){try{if(t.currentStyle)return t.currentStyle[e];if(a.getComputedStyle)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}catch(n){}return null},this.findXY=function(a){var t=0,e=0;do t+=a.offsetLeft,e+=a.offsetTop;while(a=a.offsetParent);return[t,e]},this.getMouseXY=function(e){return e=e?e:a.event,l&&e.touches&&(e=e.touches[0]),e.pageX||e.pageY?[e.pageX,e.pageY]:e.clientX||e.clientY?[e.clientX+t.getScrollLeft(),e.clientY+t.getScrollTop()]:void 0},this.getScrollLeft=function(){return document.body.scrollLeft+document.documentElement.scrollLeft},this.getScrollTop=function(){return document.body.scrollTop+document.documentElement.scrollTop},this.events={play:function(){e.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=e.css.sPlaying,e.addClass(this._360data.oUIBox,this._360data.className),t.fanOut(this)},stop:function(){e.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",t.fanIn(this)},pause:function(){e.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=e.css.sPaused,e.addClass(this._360data.oUIBox,this._360data.className)},resume:function(){e.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=e.css.sPlaying,e.addClass(this._360data.oUIBox,this._360data.className)},finish:function(){var a;e.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",this._360data.didFinish=!0,t.fanIn(this),e.config.playNext&&(a=e.indexByURL[this._360data.oLink.href]+1,a<e.links.length&&e.handleClick({target:e.links[a]}))},whileloading:function(){this.paused&&t.updatePlaying.apply(this)},whileplaying:function(){t.updatePlaying.apply(this),this._360data.fps++},bufferchange:function(){this.isBuffering?e.addClass(this._360data.oUIBox,e.css.sBuffering):e.removeClass(this._360data.oUIBox,e.css.sBuffering)}},this.stopEvent=function(t){return"undefined"!=typeof t&&"undefined"!=typeof t.preventDefault?t.preventDefault():"undefined"!=typeof a.event&&"undefined"!=typeof a.event.returnValue&&(a.event.returnValue=!1),!1},this.getTheDamnLink=s?function(t){return t&&t.target?t.target:a.event.srcElement}:function(a){return a.target},this.handleClick=function(e){if(e.button>1)return!0;var i,s,o,d,r,l,u,c=t.getTheDamnLink(e);return"a"===c.nodeName.toLowerCase()||(c=t.isChildOfNode(c,"a"))?t.isChildOfClass(c,"ui360")?(s=c.getAttribute("href"),c.href&&n.canPlayLink(c)&&!t.hasClass(c,t.excludeClass)?(n._writeDebug("handleClick()"),o=c.href,d=t.getSoundByURL(o),d?d===t.lastSound?d.togglePause():(d.togglePause(),n._writeDebug("sound different than last sound: "+t.lastSound.id),!t.config.allowMultiple&&t.lastSound&&t.stopSound(t.lastSound)):(r=c.parentNode,l=t.getElementsByClassName("ui360-vis","div",r.parentNode).length,d=n.createSound({id:"ui360Sound"+t.soundCount++,url:o,onplay:t.events.play,onstop:t.events.stop,onpause:t.events.pause,onresume:t.events.resume,onfinish:t.events.finish,onbufferchange:t.events.bufferchange,type:c.type||null,whileloading:t.events.whileloading,whileplaying:t.events.whileplaying,useWaveformData:l&&t.config.useWaveformData,useEQData:l&&t.config.useEQData,usePeakData:l&&t.config.usePeakData}),u=parseInt(t.getElementsByClassName("sm2-360ui","div",r)[0].offsetWidth,10),i=t.getElementsByClassName("sm2-canvas","canvas",r),d._360data={oUI360:t.getParentByClassName(c,"ui360"),oLink:c,className:t.css.sPlaying,oUIBox:t.getElementsByClassName("sm2-360ui","div",r)[0],oCanvas:i[i.length-1],oButton:t.getElementsByClassName("sm2-360btn","span",r)[0],oTiming:t.getElementsByClassName("sm2-timing","div",r)[0],oCover:t.getElementsByClassName("sm2-cover","div",r)[0],circleDiameter:u,circleRadius:u/2,lastTime:null,didFinish:null,pauseCount:0,radius:0,fontSize:1,fontSizeMax:t.config.fontSizeMax,scaleFont:l&&t.config.scaleFont,showHMSTime:l,amplifier:l&&t.config.usePeakData?.9:1,radiusMax:.175*u,width:0,widthMax:.4*u,lastValues:{bytesLoaded:0,bytesTotal:0,position:0,durationEstimate:0},animating:!1,oAnim:new a.Animator({duration:t.config.animDuration,transition:t.config.animTransition,onComplete:function(){}}),oAnimProgress:function(a){var e=this;e._360data.radius=parseInt(e._360data.radiusMax*e._360data.amplifier*a,10),e._360data.width=parseInt(e._360data.widthMax*e._360data.amplifier*a,10),e._360data.scaleFont&&null!==e._360data.fontSizeMax&&(e._360data.oTiming.style.fontSize=parseInt(Math.max(1,e._360data.fontSizeMax*a),10)+"px",e._360data.oTiming.style.opacity=a),(e.paused||0===e.playState||0===e._360data.lastValues.bytesLoaded||0===e._360data.lastValues.position)&&t.updatePlaying.apply(e)},fps:0},"undefined"!=typeof t.Metadata&&t.getElementsByClassName("metadata","div",d._360data.oUI360).length&&(d._360data.metadata=new t.Metadata(d,t)),d._360data.scaleFont&&null!==d._360data.fontSizeMax&&(d._360data.oTiming.style.fontSize="1px"),d._360data.oAnim.addSubject(d._360data.oAnimProgress,d),t.refreshCoords(d),t.updatePlaying.apply(d),t.soundsByURL[o]=d,t.sounds.push(d),!t.config.allowMultiple&&t.lastSound&&t.stopSound(t.lastSound),d.play()),t.lastSound=d,"undefined"!=typeof e&&"undefined"!=typeof e.preventDefault?e.preventDefault():"undefined"!=typeof a.event&&(a.event.returnValue=!1),!1):!0):!0:!0},this.fanOut=function(e){var n=e;return 1===n._360data.animating?!1:(n._360data.animating=0,soundManager._writeDebug("fanOut: "+n.id+": "+n._360data.oLink.href),n._360data.oAnim.seekTo(1),void a.setTimeout(function(){n._360data.animating=0},t.config.animDuration+20))},this.fanIn=function(e){var n=e;return-1===n._360data.animating?!1:(n._360data.animating=-1,soundManager._writeDebug("fanIn: "+n.id+": "+n._360data.oLink.href),n._360data.oAnim.seekTo(0),void a.setTimeout(function(){n._360data.didFinish=!1,n._360data.animating=0,t.resetLastValues(n)},t.config.animDuration+20))},this.resetLastValues=function(a){a._360data.lastValues.position=0},this.refreshCoords=function(a){a._360data.canvasXY=t.findXY(a._360data.oCanvas),a._360data.canvasMid=[a._360data.circleRadius,a._360data.circleRadius],a._360data.canvasMidXY=[a._360data.canvasXY[0]+a._360data.canvasMid[0],a._360data.canvasXY[1]+a._360data.canvasMid[1]]},this.stopSound=function(a){soundManager._writeDebug("stopSound: "+a.id),soundManager.stop(a.id),l||soundManager.unload(a.id)},this.buttonClick=function(e){var n=e?e.target?e.target:e.srcElement:a.event.srcElement;return t.handleClick({target:t.getParentByClassName(n,"sm2-360ui").nextSibling}),!1},this.buttonMouseDown=function(a){return l?t.addEventHandler(document,"touchmove",t.mouseDown):document.onmousemove=function(a){t.mouseDown(a)},t.stopEvent(a),!1},this.mouseDown=function(e){if(!l&&e.button>1)return!0;if(!t.lastSound)return t.stopEvent(e),!1;var n,i,s,o=e?e:a.event;return l&&o.touches&&(o=o.touches[0]),n=o.target||o.srcElement,i=t.getSoundByURL(t.getElementsByClassName("sm2_link","a",t.getParentByClassName(n,"ui360"))[0].href),t.lastTouchedSound=i,t.refreshCoords(i),s=i._360data,t.addClass(s.oUIBox,"sm2_dragging"),s.pauseCount=t.lastTouchedSound.paused?1:0,t.mmh(e?e:a.event),l?(t.removeEventHandler(document,"touchmove",t.mouseDown),t.addEventHandler(document,"touchmove",t.mmh),t.addEventHandler(document,"touchend",t.mouseUp)):(document.onmousemove=t.mmh,document.onmouseup=t.mouseUp),t.stopEvent(e),!1},this.mouseUp=function(){var a=t.lastTouchedSound._360data;t.removeClass(a.oUIBox,"sm2_dragging"),0===a.pauseCount&&t.lastTouchedSound.resume(),l?(t.removeEventHandler(document,"touchmove",t.mmh),t.removeEventHandler(document,"touchend",t.mouseUP)):(document.onmousemove=null,document.onmouseup=null)},this.mmh=function(e){"undefined"==typeof e&&(e=a.event);var n=t.lastTouchedSound,i=t.getMouseXY(e),s=i[0],o=i[1],d=s-n._360data.canvasMidXY[0],r=o-n._360data.canvasMidXY[1],l=Math.floor(c-(t.rad2deg(Math.atan2(d,r))+180));return n.setPosition(n.durationEstimate*(l/c)),t.stopEvent(e),!1},this.drawSolidArc=function(a,e,n,i,s,r,l){var u,c,m,f,h=a;h.getContext&&(u=h.getContext("2d")),a=u,l||t.clearCanvas(h),e&&(u.fillStyle=e),a.beginPath(),isNaN(s)&&(s=0),c=n-i,m=o||d,(!m||m&&n>0)&&(a.arc(0,0,n,r,s,!1),f=t.getArcEndpointCoords(c,s),a.lineTo(f.x,f.y),a.arc(0,0,c,s,r,!0),a.closePath(),a.fill())},this.getArcEndpointCoords=function(a,t){return{x:a*Math.cos(t),y:a*Math.sin(t)}},this.deg2rad=function(a){return a*Math.PI/180},this.rad2deg=function(a){return 180*a/Math.PI},this.getTime=function(a,t){var e=Math.floor(a/1e3),n=Math.floor(e/60),i=e-60*n;return t?n+":"+(10>i?"0"+i:i):{min:n,sec:i}},this.clearCanvas=function(a){var t,e,n=a,i=null;n.getContext&&(i=n.getContext("2d")),i&&(t=n.offsetWidth,e=n.offsetHeight,i.clearRect(-(t/2),-(e/2),t,e))},this.updatePlaying=function(){var a=this._360data.showHMSTime?t.getTime(this.position,!0):parseInt(this.position/1e3,10),e=t.config.scaleArcWidth;this.bytesLoaded&&(this._360data.lastValues.bytesLoaded=this.bytesLoaded,this._360data.lastValues.bytesTotal=this.bytesTotal),this.position&&(this._360data.lastValues.position=this.position),this.durationEstimate&&(this._360data.lastValues.durationEstimate=this.durationEstimate),t.drawSolidArc(this._360data.oCanvas,t.config.backgroundRingColor,this._360data.width,this._360data.radius*e,t.deg2rad(c),!1),t.drawSolidArc(this._360data.oCanvas,this._360data.metadata?t.config.loadRingColorMetadata:t.config.loadRingColor,this._360data.width,this._360data.radius*e,t.deg2rad(c*(this._360data.lastValues.bytesLoaded/this._360data.lastValues.bytesTotal)),0,!0),0!==this._360data.lastValues.position&&t.drawSolidArc(this._360data.oCanvas,this._360data.metadata?t.config.playRingColorMetadata:t.config.playRingColor,this._360data.width,this._360data.radius*e,t.deg2rad(1===this._360data.didFinish?c:c*(this._360data.lastValues.position/this._360data.lastValues.durationEstimate)),0,!0),this._360data.metadata&&this._360data.metadata.events.whileplaying(),a!==this._360data.lastTime&&(this._360data.lastTime=a,this._360data.oTiming.innerHTML=a),(this.instanceOptions.useWaveformData||this.instanceOptions.useEQData)&&u&&t.updateWaveform(this),t.config.useFavIcon&&t.vuMeter&&t.vuMeter.updateVU(this)},this.updateWaveform=function(a){if(!t.config.useWaveformData&&!t.config.useEQData||!n.features.waveformData&&!n.features.eqData)return!1;if(!a.waveformData.left.length&&!a.eqData.length&&!a.peakData.left)return!1;var e,i,s,o,d,r,l,u,c,m,f,h,g,p,v,y,_=(a._360data.oCanvas.getContext("2d"),parseInt(a._360data.circleDiameter/2,10)),C=_/2;if(t.config.useWaveformData)for(o=t.config.waveformDataDownsample,o=Math.max(1,o),d=256,r=d/o,l=0,u=0,c=null,m=t.config.waveformDataOutside?1:t.config.waveformDataConstrain?.5:.565,C=t.config.waveformDataOutside?.7:.75,f=t.deg2rad(360/r*t.config.waveformDataLineRatio),e=0;d>e;e+=o)l=t.deg2rad(360*(e/r*1/o)),u=l+f,c=a.waveformData.left[e],0>c&&t.config.waveformDataConstrain&&(c=Math.abs(c)),t.drawSolidArc(a._360data.oCanvas,t.config.waveformDataColor,a._360data.width*m*(2-t.config.scaleArcWidth),a._360data.radius*C*1.25*c,u,l,!0);if(t.config.useEQData)for(o=t.config.eqDataDownsample,h=0,o=Math.max(1,o),g=192,r=g/o,m=t.config.eqDataOutside?1:.565,s=t.config.eqDataOutside?-1:1,C=t.config.eqDataOutside?.5:.75,l=0,u=0,f=t.deg2rad(360/r*t.config.eqDataLineRatio),p=t.deg2rad(1===a._360data.didFinish?360:360*(a._360data.lastValues.position/a._360data.lastValues.durationEstimate)),i=0,v=0,e=0;g>e;e+=o)l=t.deg2rad(360*(e/g)),u=l+f,t.drawSolidArc(a._360data.oCanvas,u>p?t.config.eqDataColor:t.config.playRingColor,a._360data.width*m,a._360data.radius*C*a.eqData.left[e]*s,u,l,!0);if(t.config.usePeakData&&!a._360data.animating){for(y=a.peakData.left||a.peakData.right,g=3,e=0;g>e;e++)y=y||a.eqData[e];a._360data.amplifier=t.config.useAmplifier?.9+.1*y:1,a._360data.radiusMax=.175*a._360data.circleDiameter*a._360data.amplifier,a._360data.widthMax=.4*a._360data.circleDiameter*a._360data.amplifier,a._360data.radius=parseInt(a._360data.radiusMax*a._360data.amplifier,10),a._360data.width=parseInt(a._360data.widthMax*a._360data.amplifier,10)}},this.getUIHTML=function(a){return['<canvas class="sm2-canvas" width="'+a+'" height="'+a+'"></canvas>',' <span class="sm2-360btn sm2-360btn-default"></span>',' <div class="sm2-timing'+(navigator.userAgent.match(/safari/i)?" alignTweak":"")+'"></div>',' <div class="sm2-cover"></div>']},this.uiTest=function(a){var e,n,i,s,o,d,r,l,u,c=document.createElement("div");return c.className="sm2-360ui",e=document.createElement("div"),e.className="ui360"+(a?" "+a:""),n=e.appendChild(c.cloneNode(!0)),e.style.position="absolute",e.style.left="-9999px",i=document.body.appendChild(e),s=n.offsetWidth,o=t.getUIHTML(s),n.innerHTML=o[1]+o[2]+o[3],d=parseInt(n.offsetWidth,10),r=parseInt(d/2,10),u=t.getElementsByClassName("sm2-timing","div",i)[0],l=parseInt(t.getStyle(u,"font-size"),10),isNaN(l)&&(l=null),e.parentNode.removeChild(e),o=e=n=i=null,{circleDiameter:d,circleRadius:r,fontSizeMax:l}},this.init=function(){n._writeDebug("threeSixtyPlayer.init()");var e,i,o,d,r,u,c,m,f,h,g,p,v,y,_,C=t.getElementsByClassName("ui360","div"),D=[],M=!1,N=0;for(e=0,i=C.length;i>e;e++)D.push(C[e].getElementsByTagName("a")[0]),C[e].style.backgroundImage="none";for(t.oUITemplate=document.createElement("div"),t.oUITemplate.className="sm2-360ui",t.oUITemplateVis=document.createElement("div"),t.oUITemplateVis.className="sm2-360ui",f=t.uiTest(),t.config.circleDiameter=f.circleDiameter,t.config.circleRadius=f.circleRadius,h=t.uiTest("ui360-vis"),t.config.fontSizeMax=h.fontSizeMax,t.oUITemplate.innerHTML=t.getUIHTML(t.config.circleDiameter).join(""),t.oUITemplateVis.innerHTML=t.getUIHTML(h.circleDiameter).join(""),e=0,i=D.length;i>e;e++)!n.canPlayLink(D[e])||t.hasClass(D[e],t.excludeClass)||t.hasClass(D[e],t.css.sDefault)||(t.addClass(D[e],t.css.sDefault),t.links[N]=D[e],t.indexByURL[D[e].href]=N,N++,M=t.hasClass(D[e].parentNode,"ui360-vis"),c=(M?h:f).circleDiameter,m=(M?h:f).circleRadius,g=D[e].parentNode.insertBefore((M?t.oUITemplateVis:t.oUITemplate).cloneNode(!0),D[e]),s&&"undefined"!=typeof a.G_vmlCanvasManager?(v=D[e].parentNode,y=document.createElement("canvas"),y.className="sm2-canvas",_="sm2_canvas_"+e+(new Date).getTime(),y.id=_,y.width=c,y.height=c,g.appendChild(y),a.G_vmlCanvasManager.initElement(y),d=document.getElementById(_),o=d.parentNode.getElementsByTagName("canvas"),o.length>1&&(d=o[o.length-1])):d=D[e].parentNode.getElementsByTagName("canvas")[0],u=t.getElementsByClassName("sm2-cover","div",D[e].parentNode)[0],p=D[e].parentNode.getElementsByTagName("span")[0],t.addEventHandler(p,"click",t.buttonClick),l?t.addEventHandler(u,"touchstart",t.mouseDown):t.addEventHandler(u,"mousedown",t.mouseDown),r=d.getContext("2d"),r.translate(m,m),r.rotate(t.deg2rad(-90)));N>0&&(t.addEventHandler(document,"click",t.handleClick),t.config.autoPlay&&t.handleClick({target:t.links[0],preventDefault:function(){}})),n._writeDebug("threeSixtyPlayer.init(): Found "+N+" relevant items."),t.config.useFavIcon&&"undefined"!=typeof this.VUMeter&&(this.vuMeter=new this.VUMeter(this))}}t.prototype.VUMeter=function(a){var t=a,e=this,n=document.getElementsByTagName("head")[0],i=navigator.userAgent.match(/opera/i),s=navigator.userAgent.match(/firefox/i);this.vuMeterData=[],this.vuDataCanvas=null,this.setPageIcon=function(a){if(!t.config.useFavIcon||!t.config.usePeakData||!a)return!1;var e=document.getElementById("sm2-favicon");e&&(n.removeChild(e),e=null),e||(e=document.createElement("link"),e.id="sm2-favicon",e.rel="shortcut icon",e.type="image/png",e.href=a,document.getElementsByTagName("head")[0].appendChild(e))},this.resetPageIcon=function(){if(!t.config.useFavIcon)return!1;var a=document.getElementById("favicon");a&&(a.href="/favicon.ico")},this.updateVU=function(a){soundManager.flashVersion>=9&&t.config.useFavIcon&&t.config.usePeakData&&e.setPageIcon(e.vuMeterData[parseInt(16*a.peakData.left,10)][parseInt(16*a.peakData.right,10)])},this.createVUData=function(){var a=0,t=0,n=e.vuDataCanvas.getContext("2d"),i=n.createLinearGradient(0,16,0,0),s=n.createLinearGradient(0,16,0,0),o="rgba(0,0,0,0.2)";for(i.addColorStop(0,"rgb(0,192,0)"),i.addColorStop(.3,"rgb(0,255,0)"),i.addColorStop(.625,"rgb(255,255,0)"),i.addColorStop(.85,"rgb(255,0,0)"),s.addColorStop(0,o),s.addColorStop(1,"rgba(0,0,0,0.5)"),a=0;16>a;a++)e.vuMeterData[a]=[];for(a=0;16>a;a++)for(t=0;16>t;t++)e.vuDataCanvas.setAttribute("width",16),e.vuDataCanvas.setAttribute("height",16),n.fillStyle=s,n.fillRect(0,0,7,15),n.fillRect(8,0,7,15),n.fillStyle=i,n.fillRect(0,15-a,7,16-(16-a)),n.fillRect(8,15-t,7,16-(16-t)),n.clearRect(0,3,16,1),n.clearRect(0,7,16,1),n.clearRect(0,11,16,1),e.vuMeterData[a][t]=e.vuDataCanvas.toDataURL("image/png")},this.testCanvas=function(){var a,t=document.createElement("canvas"),e=null;if(!t||"undefined"==typeof t.getContext)return null;if(e=t.getContext("2d"),!e||"function"!=typeof t.toDataURL)return null;try{a=t.toDataURL("image/png")}catch(n){return null}return t},this.init=function(){t.config.useFavIcon&&(e.vuDataCanvas=e.testCanvas(),e.vuDataCanvas&&(s||i)?e.createVUData():t.config.useFavIcon=!1)},this.init()},t.prototype.Metadata=function(a,t){soundManager._wD("Metadata()");var e,n,i=this,s=a._360data.oUI360,o=s.getElementsByTagName("ul")[0],d=o.getElementsByTagName("li");for(navigator.userAgent.match(/firefox/i),this.lastWPExec=0,this.refreshInterval=250,this.totalTime=0,this.events={whileplaying:function(){var e,n,s,o=a._360data.width,d=a._360data.radius,r=a.durationEstimate||1e3*i.totalTime,l=null;for(e=0,n=i.data.length;n>e;e++)l=e%2===0,t.drawSolidArc(a._360data.oCanvas,l?t.config.segmentRingColorAlt:t.config.segmentRingColor,l?o:o,l?d/2:d/2,t.deg2rad(360*(i.data[e].endTimeMS/r)),t.deg2rad(360*((i.data[e].startTimeMS||1)/r)),!0);s=new Date,s-i.lastWPExec>i.refreshInterval&&(i.refresh(),i.lastWPExec=s)}},this.refresh=function(){var t,e,n=null,i=a.position,s=a._360data.metadata.data;for(t=0,e=s.length;e>t;t++)if(i>=s[t].startTimeMS&&i<=s[t].endTimeMS){n=t;break}n!==s.currentItem&&n<s.length&&(a._360data.oLink.innerHTML=s.mainTitle+' <span class="metadata"><span class="sm2_divider"> | </span><span class="sm2_metadata">'+s[n].title+"</span></span>",s.currentItem=n)},this.strToTime=function(a){var t,e=a.split(":"),n=0;for(t=e.length;t--;)n+=parseInt(e[t],10)*Math.pow(60,e.length-1-t);return n},this.data=[],this.data.givenDuration=null,this.data.currentItem=null,this.data.mainTitle=a._360data.oLink.innerHTML,e=0;e<d.length;e++)this.data[e]={o:null,title:d[e].getElementsByTagName("p")[0].innerHTML,startTime:d[e].getElementsByTagName("span")[0].innerHTML,startSeconds:i.strToTime(d[e].getElementsByTagName("span")[0].innerHTML.replace(/[()]/g,"")),duration:0,durationMS:null,startTimeMS:null,endTimeMS:null,oNote:null};for(n=t.getElementsByClassName("duration","div",s),this.data.givenDuration=n.length?1e3*i.strToTime(n[0].innerHTML):0,e=0;e<this.data.length;e++)this.data[e].duration=parseInt(this.data[e+1]?this.data[e+1].startSeconds:(i.data.givenDuration?i.data.givenDuration:a.durationEstimate)/1e3,10)-this.data[e].startSeconds,this.data[e].startTimeMS=1e3*this.data[e].startSeconds,this.data[e].durationMS=1e3*this.data[e].duration,this.data[e].endTimeMS=this.data[e].startTimeMS+this.data[e].durationMS,this.totalTime+=this.data[e].duration},navigator.userAgent.match(/webkit/i)&&navigator.userAgent.match(/mobile/i)&&soundManager.setup({useHTML5Audio:!0}),soundManager.setup({html5PollingInterval:50,debugMode:a.location.href.match(/debug=1/i),consoleOnly:!0,flashVersion:9,useHighPerformance:!0,useFlashBlock:!0}),soundManager.debugMode&&a.setInterval(function(){var t=a.threeSixtyPlayer;t&&t.lastSound&&t.lastSound._360data.fps&&"undefined"==typeof a.isHome&&(soundManager._writeDebug("fps: ~"+t.lastSound._360data.fps),t.lastSound._360data.fps=0)},1e3),a.ThreeSixtyPlayer=t}(window),threeSixtyPlayer=new ThreeSixtyPlayer,soundManager.onready(threeSixtyPlayer.init);